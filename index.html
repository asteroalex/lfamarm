<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Скоро появится...</title>
    <!-- Вставка скрипта для рекламы -->
    <script src="https://sad.adsgram.ai/js/sad.min.js"></script>
    <style>
        body {
            margin: 0;
            height: 100vh;
            background-color: black;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-family: 'Courier New', monospace;
            color: white;
            font-size: 2em;
        }
        button {
            background-color: #4CAF50;
            color: white;
            font-size: 1.2em;
            padding: 10px 20px;
            border: none;
            cursor: pointer;
            margin-top: 20px;
        }
        button:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>
    <div>Скоро появится...</div>
    <div id="root"></div> <!-- React будет рендерить сюда -->

    <!-- Подключаем React и ReactDOM -->
    <script src="https://unpkg.com/react@17/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script>

    <!-- Скрипт с компонентом кнопки и хука -->
    <script>
        // Кастомный хук для работы с Adsgram
        function useAdsgram({ blockId, onReward, onError }) {
          const AdControllerRef = React.useRef(undefined);

          // Инициализация Adsgram SDK
          React.useEffect(() => {
            if (window.Adsgram) {
              AdControllerRef.current = window.Adsgram.init({ blockId });
            }
          }, [blockId]);

          // Функция для показа рекламы
          return React.useCallback(async () => {
            if (AdControllerRef.current) {
              try {
                await AdControllerRef.current.show();
                onReward(); // Если реклама успешно просмотрена
              } catch (result) {
                onError(result); // Если ошибка при показе рекламы
              }
            } else {
              onError({
                error: true,
                done: false,
                state: 'load',
                description: 'Adsgram script not loaded',
              });
            }
          }, [onError, onReward]);
        }

        // Компонент кнопки для показа рекламы
        function ShowAdButton() {
          const onReward = React.useCallback(() => {
            alert('Награда получена!');
          }, []);

          const onError = React.useCallback((result) => {
            alert('Ошибка: ' + JSON.stringify(result, null, 4));
          }, []);

          // Используем кастомный хук
          const showAd = useAdsgram({
            blockId: '7577', // Замените на ваш реальный blockId
            onReward,
            onError
          });

          return (
            React.createElement('button', { onClick: showAd }, 'Показать рекламу')
          );
        }

        // Рендерим компонент
        ReactDOM.render(
          React.createElement(ShowAdButton),
          document.getElementById('root')
        );
    </script>
</body>
</html>
